# DWBrowser

DWBrowser 是一个专业的 macOS 双栏文件管理器，提供高效、直观的文件浏览和管理体验。

## 功能特性

### 🚀 核心功能
- **双栏布局**：左右两个独立的文件浏览器，便于文件操作和对比
- **智能导航**：快速切换目录，支持向上导航和路径历史
- **文件预览**：实时显示文件详细信息
- **多视图模式**：支持列表视图和图标视图切换

### 📱 用户界面
- **现代化设计**：基于 SwiftUI 构建的简洁、现代界面
- **响应式布局**：自适应窗口大小变化
- **自定义列显示**：可选择显示/隐藏文件类型、大小、修改日期
- **固定侧边栏**：210px 固定宽度状态面板，提供系统信息和快捷操作

### 🔄 交互功能
- **水平滚动**：当窗口宽度不足时，文件列表支持水平滚动查看所有信息
- **智能布局优先级**：确保重要信息（文件名、大小、日期、类型）始终可见
- **拖拽支持**：支持文件拖拽操作
- **键盘快捷键**：常用操作支持快捷键访问

## 系统要求

- macOS 12.0 或更高版本
- Xcode 14.0 或更高版本
- 支持 Apple Silicon 和 Intel 架构

## 技术栈

- **开发语言**：Swift 5.7+
- **UI 框架**：SwiftUI
- **架构模式**：MVVM
- **构建工具**：Xcode

## 项目结构

```
DWBrowser/
├── DWBrowser/
│   ├── ContentView.swift          # 主视图容器
│   ├── DWBrowserApp.swift        # 应用程序入口
│   ├── Info.plist               # 应用信息配置
│   └── Views/
│       ├── FileBrowserPane.swift    # 文件浏览器面板
│       └── SidebarView.swift         # 侧边栏视图
├── DWBrowser.xcodeproj/         # Xcode 项目文件
└── README.md                    # 项目说明文档
```

## 构建和运行

### 使用 Xcode
1. 克隆或下载项目到本地
2. 双击打开 `DWBrowser.xcodeproj`
3. 在 Xcode 中选择目标设备为 "My Mac"
4. 点击运行按钮（⌘+R）构建并启动应用

### 使用命令行
```bash
# 编译项目
xcodebuild -scheme DWBrowser -configuration Debug build

# 运行应用
open ~/Library/Developer/Xcode/DerivedData/DWBrowser-*/Build/Products/Debug/DWBrowser.app
```

## 使用说明

### 基本操作
1. **导航目录**：点击文件夹图标或双击进入目录
2. **返回上级**：使用工具栏中的向上按钮
3. **文件选择**：点击文件或文件夹进行选择
4. **多选操作**：按住 Command 键进行多选

### 自定义显示
1. **显示/隐藏列**：在顶部菜单中勾选/取消勾选相应的显示选项
2. **调整视图**：使用工具栏按钮切换视图模式
3. **滚动查看**：当窗口宽度不足时，可水平滚动查看完整文件信息

### 键盘快捷键
- `⌘+↑`：返回上级目录
- `⌘+R`：刷新当前目录
- `Space`：预览选中文件

## 开发计划

### 近期更新
- [ ] 文件搜索功能
- [ ] 书签收藏夹
- [ ] 文件操作（复制、移动、删除）
- [ ] 右键上下文菜单

### 长期规划
- [ ] 网络驱动器支持
- [ ] 标签页界面
- [ ] 主题自定义
- [ ] 插件系统

## 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

## 更新日志

### v1.1 (2025-12-18)
- 修复了文件操作中的多个编译错误
- 改进了复制和移动功能的稳定性
- 修复了闭包捕获问题
- 优化了文件大小计算逻辑
- 更新了版本号和发布日期
- 🚨 修复严重bug：从本地移动文件到SFTP导致文件丢失的问题
- 🚨 修复严重bug：从SFTP移动文件到本地导致目标文件大小为0且源文件未删除的问题
- 🔧 优化文件复制后的刷新逻辑，确保目录显示正确更新
- 🔧 改进SFTP操作的错误处理和日志输出
- 🔧 增强文件操作的安全性和可靠性
- 🐛 修复多个文件复制时的刷新冲突问题

### v1.0.0
- 初始版本发布
- 实现基础双栏文件浏览功能
- 添加水平滚动支持
- 优化响应式布局
- 实现自定义列显示功能

---

**注意**：这是一个开源项目，仅供学习和研究使用。在使用过程中遇到问题，欢迎通过 Issues 反馈。